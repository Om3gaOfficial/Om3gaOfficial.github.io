<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>ADM Grade Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div class="container text-center">
      <div class="row">
        <div class="col-md col-lg-12">
            <h1>ADM</h1>
        </div>
      </div>
    </div>

    <div class="container-md">
      <div class="row">
        <div class="col-md justify-content-md-center">
          <label class="form-label formtxt">Note Test 1</label>
            <input type="number" id="t1" class = "form-control" name="test1" min="0" max="20">
        </div>
        <div class="col-md">
          <label class="form-label formtxt">Note Test 2</label>
          <input type="number" id="t2" class = "form-control" name="test2" min="0" max="20">
        </div>
        <div class="col-md">
          <label class="form-label formtxt">Note Test 3</label>
          <input type="number" id="t3" class = "form-control" name="test3" min="0" max="20">
        </div>
      </div>
      <div class="row justify-content-md-center">
        <div class="col-md col-lg-4">
          <label class="form-label formtxt">Kreuze</label>
          <input type="number" id="k" class = "form-control" name="asignments" min="0" max="60">
        </div>
        <div class="col-md col-lg-8">
          <label class="form-label formtxt">Tafelleistung</label>
          <input type="text" id="p" class = "form-control" name="performance" min="0" max="10">
        </div>
      </div>
    </div>
    <div class="container text-center">
      <div class="row">
        <div class="col-md col-lg-12">
            <button type="button" id = "button" class="btn btn-light" onclick="calculateGrade()">Calculate</button>
        </div>
      </div>
      <div class="row">
        <div class="col-md col-lg">
          <p id="grade">Hier k√∂nnte ihre Note stehen!</p>
        </div>
      </div>
    </div>
  </body>
  <script>
    var input = document.getElementById("p");
    input.addEventListener("keypress", function(event) {
  // If the user presses the "Enter" key on the keyboard
  if (event.key === "Enter") {
    // Cancel the default action, if needed
    event.preventDefault();
    // Trigger the button element with a click
    document.getElementById("button").click();
  }
});

  function roundToTwo(num) {
      return +(Math.round(num + "e+2")  + "e-2");
  }

  function calculateGrade() {
  var k = document.getElementById("k").value;
  var N = 60;
  var t1 = document.getElementById("t1").value;
  var t2 = document.getElementById("t2").value;
  var t3 = document.getElementById("t3").value;
  var pArray = document.getElementById("p").value;

  var p = 0;
  var textGrade = "";

  var pArray = pArray.split(",");
  for (var i = 0; i < pArray.length; i++) {
      p += parseInt(pArray[i]);
  }
  p = p / pArray.length;

  var grade = (
      Math.floor(((5 * k) / (6 * N)) + 0.5) *
      Math.floor(((parseFloat(t1) + parseFloat(t2) + parseFloat(t3) - Math.min(parseFloat(t1), parseFloat(t2), parseFloat(t3))) / 40) + 0.5)
      * Math.floor((p / 8) + 0.5) * ((k / (5 * N)) + ((parseFloat(t1) + parseFloat(t2) + parseFloat(t3)) / 100) + (p / 50))
  );

  if(0 <= grade < 0.4){
      textGrade = "'Nicht ausreichend!' | 5er"
  }else if (0.4 <= grade < 0.55){
      textGrade = "'Ausreichend' | 4er"
  }else if (0.55 <= grade < 0.7){
      textGrade = "'Befriedigend' | 3er"
  }else if (0.7 <= grade < 0.85){
      textGrade = "'Gut' | 2er"
  }else if (0.85 <= grade <= 1){
      textGrade = "'Sehr gut!' | 1er"
  }

  document.getElementById("grade").innerHTML = textGrade + " (" + roundToTwo(grade * 100) + "%)";
  }
</script>
</html>
